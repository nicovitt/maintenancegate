<app-pageheader
  headline="Wartungsplan bearbeiten"
  [showbackbutton]="true"
></app-pageheader>

<div class="flex_container_row_spacebetween_start">
  <button mat-stroked-button class="actionbuttion" (click)="save()">
    <span *ngIf="!plansaved" class="notsavedwarning"
      >Noch nicht gespeichert!</span
    >
    <span *ngIf="plansaved" class="savedcofirmation">Gespeichert!</span>
    Speichern
  </button>
</div>
<div class="metadataform">
  <form
    [formGroup]="schedulemetadataForm"
    class="flex_container_column_start_stretch"
  >
    <mat-form-field appearance="outline" type="text">
      <mat-label>Titel</mat-label>
      <input matInput placeholder="" formControlName="title" />
      <mat-hint>Titel des Wartungsplans</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="outline" type="text">
      <mat-label>Beschreibung</mat-label>
      <input matInput placeholder="" formControlName="description" />
      <mat-hint>Beschreibung des Wartungsplans</mat-hint>
    </mat-form-field>
  </form>
</div>

<button mat-stroked-button (click)="addstep()">Schritt hinzufügen</button>
<table mat-table [dataSource]="schedule.steps" class="table-steps">
  <ng-container matColumnDef="performer">
    <th mat-header-cell *matHeaderCellDef>Mitarbeiter</th>
    <td mat-cell *matCellDef="let element">{{ element.performer }}</td>
  </ng-container>

  <ng-container matColumnDef="position">
    <th mat-header-cell *matHeaderCellDef>Position</th>
    <td mat-cell *matCellDef="let element">{{ element.position }}</td>
  </ng-container>

  <ng-container matColumnDef="topic">
    <th mat-header-cell *matHeaderCellDef>Was</th>
    <td mat-cell *matCellDef="let element">{{ element.topic }}</td>
  </ng-container>

  <ng-container matColumnDef="frequency">
    <th mat-header-cell *matHeaderCellDef>Frequenz</th>
    <td mat-cell *matCellDef="let element">{{ element.frequency }}</td>
  </ng-container>

  <ng-container matColumnDef="protectivegear">
    <th mat-header-cell *matHeaderCellDef>PSA</th>
    <td mat-cell *matCellDef="let element">{{ element.protectivegear }}</td>
  </ng-container>

  <ng-container matColumnDef="type">
    <th mat-header-cell *matHeaderCellDef>Typ</th>
    <td mat-cell *matCellDef="let element">{{ element.type }}</td>
  </ng-container>

  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef>Beschreibung</th>
    <td mat-cell *matCellDef="let element">{{ element.description }}</td>
  </ng-container>

  <ng-container matColumnDef="usedmaterial">
    <th mat-header-cell *matHeaderCellDef>Material</th>
    <td mat-cell *matCellDef="let element">{{ element.usedmaterial }}</td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Aktionen</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        matTooltip="Löschen"
        (click)="deletestep(element)"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
<div
  class="emptydataintable flex_container_row_spacearound_center"
  *ngIf="schedule.steps.length == 0"
>
  Noch keine Daten vorhanden.
</div>
